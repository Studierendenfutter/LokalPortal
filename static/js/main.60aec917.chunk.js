(this["webpackJsonpstudierendenfutter-frontend"]=this["webpackJsonpstudierendenfutter-frontend"]||[]).push([[0],{153:function(e,t,n){e.exports=n(185)},155:function(e,t,n){},183:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a);n(155),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(53),u=n(12),l=n(50),i=n(11),s=n(7),o=n.n(s),p=n(10),m=n(66),f=n(51),d=n(203),h=n(198),v=n(204),E=n(201),b=n(202),g=n(34),w=n.n(g),O={BACKEND_URL:"https://api.studierendenfutter.de"},j=O.BACKEND_URL+"/canteenUsers/login";function y(e){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post(j,t);case 3:n=e.sent,window.localStorage.setItem("authToken",JSON.stringify({token:n.data.token})),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function x(){var e=Object(a.useState)({password:"",email:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(!1),l=Object(i.a)(u,2),s=l[0],g=l[1],w=function(e){var t=e.target,a=t.value,r=t.name;c(Object(f.a)({},n,Object(m.a)({},r,a)))},O=function(){var e=Object(p.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(n);case 2:e.sent?(g(!0),setTimeout((function(){return g(!1)}),5e3)):window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement(h.a,null,r.a.createElement(v.a,null,"Login"),s&&r.a.createElement(E.a,{negative:!0},"Bitte versuche Sie eine andere E-Mail oder ein anderes Password ."),r.a.createElement(h.a.Input,{label:"E-Mail",type:"text",value:n.email,name:"email",onChange:w}),r.a.createElement(h.a.Input,{label:"Password",type:"password",value:n.password,name:"password",onChange:w}),r.a.createElement(b.a,{type:"button",positive:!0,onClick:O},"Login"))))}function C(){return r.a.createElement("div",null,r.a.createElement(x,null))}var N=n(199);function S(e){var t=e.columnNames,n=void 0===t?[]:t,a=e.content,c=void 0===a?[]:a;return r.a.createElement(N.a,{celled:!0},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Row,null,n.map((function(e){return r.a.createElement(N.a.HeaderCell,{key:e},e)})))),r.a.createElement(N.a.Body,null,c.map((function(e){return r.a.createElement(N.a.Row,{key:e[0]},e.map((function(e){return e})))}))))}function B(){return{authorization:"Bearer "+JSON.parse(window.localStorage.getItem("authToken")).token}}function U(e,t){var n=B();return w.a.delete(e,{data:t,headers:n})}function D(e){var t=e.meals;return t?r.a.createElement("div",null,r.a.createElement(b.a,{icon:"add",as:c.b,to:"/meals/create",positive:!0,content:"Gericht hinzuf\xfcgen"}),r.a.createElement(S,{columnNames:["Id","Meal Name","Date","Action"],content:t.map((function(e){return[r.a.createElement(N.a.Cell,null,e.id),r.a.createElement(N.a.Cell,null,e.name),r.a.createElement(N.a.Cell,null,e.date),r.a.createElement(N.a.Cell,{collapsing:!0},r.a.createElement("div",null,r.a.createElement(b.a,{as:c.b,to:"/meals/".concat(e.id),icon:"edit",primary:!0}),r.a.createElement(b.a,{as:b.a,onClick:Object(p.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=e.id,U(O.BACKEND_URL+"/canteenUsers/meals/"+n);case 2:window.location.reload();case 3:case"end":return t.stop()}var n}),t)}))),icon:"trash",negative:!0})))]}))}),t&&0===t.length&&r.a.createElement("p",null,"Sie haben noch keine Gerichte eingetragen."," ",r.a.createElement(c.b,{to:"/meals/create"},"Jetzt loslegen."))):null}function K(e){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=B(),e.next=4,w.a.get(t,{headers:n});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function z(){return K(O.BACKEND_URL+"/canteenUsers/meals")}function A(){var e=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),[n]}(),t=Object(i.a)(e,1)[0];return r.a.createElement(D,{meals:t})}function I(){return function(e,t){var n=Object(a.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),r=Object(i.a)(n,2),c=r[0],u=r[1];return[c,function(t){try{var n=t instanceof Function?t(c):t;u(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}("authToken")}function L(){var e=I();return Object(i.a)(e,1)[0]?r.a.createElement(A,null):r.a.createElement(C,null)}function M(e){var t=e.meal,n=e.setMeal,c=Object(a.useState)(t),u=Object(i.a)(c,2),l=u[0],s=u[1];if(Object(a.useEffect)((function(){s(t)}),[t]),!l)return null;var o=function(){var e=parseFloat(l.price.replace(",",".")).toString();console.log(e),s(Object(f.a)({},l,{price:e})),n(Object(f.a)({},l,{price:e}))},p=function(e){var n=e.target,a=n.name,r=n.value;s(Object(f.a)({},t,Object(m.a)({},a,r)))};return r.a.createElement(h.a,null,r.a.createElement(h.a.Input,{value:l.name,label:"Name",name:"name",onChange:p,onBlur:o}),r.a.createElement(h.a.Input,{value:l.price,label:"Preis",name:"price",onChange:p,onBlur:o}),r.a.createElement(h.a.Input,{value:l.date,label:"Datum",name:"date",onChange:p,onBlur:o}))}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear()+"-"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<10?"0":"")+e.getDate();return t}function G(e,t){var n=B();return w.a.post(e,t,{headers:n})}var T=O.BACKEND_URL+"/canteenUsers/meals";function F(e){return J.apply(this,arguments)}function J(){return(J=Object(p.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G(T,t);case 3:return n=e.sent,e.abrupt("return",n.data.meal);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function H(e){return K(O.BACKEND_URL+"/canteenUsers/canteen")}function P(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],r=t[1];function c(){return(c=Object(p.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){c.apply(this,arguments)}()}),[]),[n]}function V(){var e=Object(u.f)(),t=Object(a.useState)({name:"",date:R(),price:""}),n=Object(i.a)(t,2),c=n[0],l=n[1],s=P(),m=Object(i.a)(s,1)[0],d=function(){var t=Object(p.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(Object(f.a)({},c,{canteen_id:m.id}));case 2:n=t.sent,e.push("/meals/"+n.id);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(v.a,{size:"large"},"Gericht erstellen"),r.a.createElement(E.a,{info:!0},'Tragen Sie den Namen und Preis des Gerichtes ein und klicken sie anschlie\xdfend auf "Erstellen".'),r.a.createElement(M,{meal:c,setMeal:l}),r.a.createElement("br",null),r.a.createElement(b.a,{icon:"send",positive:!0,onClick:d},"Erstellen"),r.a.createElement(b.a,{icon:"send",negative:!0,basic:!0,onClick:function(){e.push("/")}},"Abbrechen"))}var W=n(197);function Y(e){return $.apply(this,arguments)}function $(){return($=Object(p.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.BACKEND_URL+"/canteenUsers/meals/"+t,e.prev=1,e.next=4,K(n);case 4:return a=e.sent,e.abrupt("return",a.meal);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function q(e){return function(e,t){var n=B();return w.a.put(e,t,{headers:n})}(O.BACKEND_URL+"/canteenUsers/meals/"+e.id,e)}function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(p.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.BACKEND_URL+"/canteenUsers/meals/"+t+"/types",e.prev=1,e.next=4,K(n);case 4:return a=e.sent,console.log(a),e.abrupt("return",a.mealHasMealTypes);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function Z(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(p.a)(o.a.mark((function e(t,n){var a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.BACKEND_URL+"/canteenUsers/meals/"+t+"/types",e.prev=1,console.log(n),e.next=5,G(a,n);case 5:return r=e.sent,c=r.data.mealMealHasMealType,e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function te(e,t,n){return U(O.BACKEND_URL+"/canteenUsers/meals/"+e+"/types/"+t,{code:n})}var ne={fish:"Fisch",meat:"Fleisch",vege:"Vegetarisch",vegan:"Vegan"};function ae(){var e=Object(u.g)().mealId,t=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),r=n[0],c=n[1];function u(){return l.apply(this,arguments)}function l(){return(l=Object(p.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:n=t.sent,c(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=Object(p.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:return e.next=4,u();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){u()}),[]),[r,function(e){return s.apply(this,arguments)}]}(e),n=Object(i.a)(t,2),c=n[0],l=n[1],s=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1];function u(){return l.apply(this,arguments)}function l(){return(l=Object(p.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(e);case 2:n=t.sent,c(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=Object(p.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e,n);case 2:return t.next=4,u();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=Object(p.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(e,n);case 2:return t.next=4,u();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){u()}),[]),[r,function(e){return s.apply(this,arguments)},function(e){return m.apply(this,arguments)}]}(e),m=Object(i.a)(s,3),f=m[0],h=m[1],g=m[2],w=Object(a.useState)(0),O=Object(i.a)(w,2),j=O[0],y=O[1];return r.a.createElement("div",null,r.a.createElement(v.a,{size:"large"},"Gericht Bearbeiten"),r.a.createElement(M,{meal:c,setMeal:l}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(v.a,null,"Kategorien"),r.a.createElement(S,{columnNames:["Name","Bild",""],content:f.map((function(e){return[r.a.createElement(N.a.Cell,null,ne[e.name]),r.a.createElement(N.a.Cell,null,r.a.createElement("img",{alt:ne[e.name]+" image",src:e.icon_url,style:{width:"16px"}})),r.a.createElement(N.a.Cell,{collapsing:!0},r.a.createElement(b.a,{icon:"trash",negative:!0,onClick:function(){return g(e.id)}}))]}))}),f&&0===f.length&&r.a.createElement(E.a,{warning:!0},"Diesem Gericht wurde noch keine Kategorie hinzugef\xfcgt. Es braucht mindestens eine Kategorie, um im Lunchletter angezeigt zu werden."," "),r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement(v.a,{size:"small"},"Kategorien hinzuf\xfcgen"),r.a.createElement(W.a,{placeholder:"W\xe4hlen Sie eine Kategorie aus. ",fluid:!0,search:!0,selection:!0,value:j,onChange:function(e,t){var n=t.value;return y(n)},label:"Canteen",options:[{key:1,value:1,text:"Fleisch"},{key:2,value:2,text:"Fisch"},{key:3,value:3,text:"Vegetarisch"},{key:4,value:4,text:"Vegan"}]}),r.a.createElement("br",null),r.a.createElement(b.a,{positive:!0,content:"Hinzuf\xfcgen",onClick:function(){return h({meal_id:e,meal_type_id:j})}})))))}n(183);function re(e){var t=e.children,n=Object(u.f)(),a=I(),l=Object(i.a)(a,1)[0];return r.a.createElement("div",null,r.a.createElement("div",{className:"sf-canteen-user-topbar"},r.a.createElement(c.b,{to:"/",color:"white"},r.a.createElement("div",{className:"sf-canteen-user-topbar-left"},r.a.createElement("img",{src:"https://studierendenfutter.de/wp-content/uploads/2021/02/Header-Desktop-s.png",alt:"Kochm\xfctze \xfcber gekreuzten Messer und Gabel",className:"sf-canteen-user-topbar-img"}))),l?r.a.createElement("div",null,r.a.createElement(b.a,{inverted:!0,color:"white",onClick:function(){return n.push("/meals/create")}},"Gericht hinzuf\xfcgen"),r.a.createElement(b.a,{inverted:!0,color:"red",onClick:function(){window.localStorage.removeItem("authToken"),n.push("/"),window.location.reload()}},"Ausloggen")):r.a.createElement("div",null)),r.a.createElement("div",{className:"sf-canteen-user-content"},t))}n(184);var ce=function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(re,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(L,null)),r.a.createElement(u.a,{exact:!0,path:"/meals/create"},r.a.createElement(V,null)),r.a.createElement(u.a,{exact:!0,path:"/meals/:mealId"},r.a.createElement(ae,null))))))},ue=document.getElementById("root");ue.hasChildNodes()?Object(l.hydrate)(r.a.createElement(ce,null),ue):Object(l.render)(r.a.createElement(ce,null),ue),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[153,1,2]]]);
//# sourceMappingURL=main.60aec917.chunk.js.map